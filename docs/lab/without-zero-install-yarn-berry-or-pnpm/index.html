<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-lab/without-zero-install-yarn-berry-or-pnpm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Zero-Install 없이 Yarn berry OR PNPM? | yhwalog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yhwabillie.github.io/yhwalog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://yhwabillie.github.io/yhwalog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://yhwabillie.github.io/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Zero-Install 없이 Yarn berry OR PNPM? | yhwalog"><meta data-rh="true" name="description" content="과연 Zero-Install을 쓰지 않는 Yarn berry는 앙코없는 찜빵이 될까요?🧑‍🍳"><meta data-rh="true" property="og:description" content="과연 Zero-Install을 쓰지 않는 Yarn berry는 앙코없는 찜빵이 될까요?🧑‍🍳"><link data-rh="true" rel="icon" href="/yhwalog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yhwabillie.github.io/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm"><link data-rh="true" rel="alternate" href="https://yhwabillie.github.io/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm" hreflang="ko"><link data-rh="true" rel="alternate" href="https://yhwabillie.github.io/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-NRFZ5FHG",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/yhwalog/assets/css/styles.70ff24a8.css">
<script src="/yhwalog/assets/js/runtime~main.ae6168db.js" defer="defer"></script>
<script src="/yhwalog/assets/js/main.de0abc4a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRFZ5FHG" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="메인" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/yhwalog/"><div class="navbar__logo"><img src="/yhwalog/img/logo.svg" alt="yhwalog Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/yhwalog/img/logo.svg" alt="yhwalog Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">yhwalog</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm">Logs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/yhwabillie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm">🔬 실험실</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm">Zero-Install 없이 Yarn berry OR PNPM?</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/yhwalog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">🔬 실험실</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Zero-Install 없이 Yarn berry OR PNPM?</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>Zero-Install 없이 Yarn berry OR PNPM?</h1></header><p>과연 Zero-Install을 쓰지 않는 Yarn berry는 앙코없는 찜빵이 될까요?🧑‍🍳</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="intro">Intro<a class="hash-link" aria-label="Intro에 대한 직접 링크" title="Intro에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#intro">​</a></h2>
<p>이전 회사에서 근무할때 국제화 addon 기능을 활용하여 UI 컴포넌트를 테스트하기 위해 <code>Storybook</code> 도입을 담당했던 경험이 있습니다. Storybook v8은 yarn berry 버전 이상의 환경이 요구되었고 이를 대처하기 위한 마이그레이션 과정 중 <code>유령 의존성</code>과 <code>PnP</code>, <code>zero-install</code> 그리고 또 다른 패키지 매니저 <code>pnpm</code>을 알게되었습니다.</p>
<br>
<p>결과적으로 yarn berry v4로 <code>zero-install</code>을 적용했지만, 당시 <code>unplugged</code> 용량이 적지 않아 가장 기대하고 있었던 <code>DX적인 부분</code>에서 드라마틱한 효과는 볼 수 없었습니다. 빌드 시간은 조금 줄어들었지만, <code>브랜치를 옮겨다닐때마다 종속성을 깔고 지우는 루틴</code>은 바뀌지 않았기 때문입니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="안정적이지-않은-상태의-기능이라면-당장-사용해야하는-이유가-있을까">안정적이지 않은 상태의 기능이라면 당장 사용해야하는 이유가 있을까?<a class="hash-link" aria-label="안정적이지 않은 상태의 기능이라면 당장 사용해야하는 이유가 있을까?에 대한 직접 링크" title="안정적이지 않은 상태의 기능이라면 당장 사용해야하는 이유가 있을까?에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#안정적이지-않은-상태의-기능이라면-당장-사용해야하는-이유가-있을까">​</a></h3>
<p>yarn에서도 <a href="https://yarnpkg.com/blog/release/4.0" target="_blank" rel="noopener noreferrer">v4 릴리즈 노트에서 zero-install을 더이상 디폴트 설정으로 활성화하지 않겠다</a>는 결정을 했습니다. 케이스마다 효과가 다른 변동성을 가진 zero-install을 버린다면 확실하게 남는 기능은 <code>PnP</code>입니다.</p>
<p>문득 yarn의 간판 기능인 <code>zero-install을 버리고 PnP만 차용하더라도 다른 패키지 매니저에 비하면 더 나은 선택일까?</code> 라는 의문이 들었습니다. 유령 의존성 문제를 해결하는 기능이라면 <code>pnpm</code>으로도 동일한 효과를 볼 수 있기 때문입니다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="그래서-zero-install을-사용하지-않는다면-yarn-berry-with-pnp-or-pnpm">그래서 zero-install을 사용하지 않는다면 yarn berry (with pnp) OR pnpm?<a class="hash-link" aria-label="그래서 zero-install을 사용하지 않는다면 yarn berry (with pnp) OR pnpm?에 대한 직접 링크" title="그래서 zero-install을 사용하지 않는다면 yarn berry (with pnp) OR pnpm?에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#그래서-zero-install을-사용하지-않는다면-yarn-berry-with-pnp-or-pnpm">​</a></h3>
<p>마이그레이션 작업을 했던 당시를 회고하며, <code>pnpm</code>과 비교한다면 <code>PnP 기능만 차용한 yarn berry의 성능적 이점</code>에는 무엇이 있을지 직접 확인해보고 그 과정을 작성해보겠습니다.</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="개발-환경-조건">개발 환경 조건<a class="hash-link" aria-label="개발 환경 조건에 대한 직접 링크" title="개발 환경 조건에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#개발-환경-조건">​</a></h2>
<p>최대한 동일하고 기본적인 환경에서 비교를 시작하기 위해, 몇가지 조건을 설정하였습니다.</p>
<ul>
<li>
<p>[공통] build 결과물을 <code>&#x27;standalone&#x27;으로 경량화한 Next.js 기본 제공 템플릿</code>을 시작점으로 사용</p>
</li>
<li>
<p>[yarn berry] zero-install을 사용하지 않고, <code>nodeLinker를 PnP로 설정</code>합니다.</p>
<table><thead><tr><th style="text-align:center"></th><th style="text-align:center">yarn berry (PnP)</th><th style="text-align:center">pnpm</th></tr></thead><tbody><tr><td style="text-align:center">Node</td><td style="text-align:center">v20.11.1</td><td style="text-align:center">v20.11.1</td></tr><tr><td style="text-align:center">Next.js</td><td style="text-align:center">v14.2.5 (standalone build)</td><td style="text-align:center">v14.2.5 (standalone build)</td></tr><tr><td style="text-align:center">Version</td><td style="text-align:center">v4.3.1</td><td style="text-align:center">v.9.5.0</td></tr></tbody></table>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="비교-조건">비교 조건<a class="hash-link" aria-label="비교 조건에 대한 직접 링크" title="비교 조건에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#비교-조건">​</a></h2>
<p>최초 빌드를 기준으로 하기위해 workflow 캐시 작업은 제외하였습니다.<br>
<code>pnpm</code>의 경우 <code>pnpm store prune</code> 명령어로 pnpm의 cache를 삭제 후 측정하였습니다.<br>
<!-- -->docker의 이미지 build 시간은 <code>--no-cache 플래그</code>를 사용하여 캐시 없이 최초 측정을 작성하였습니다.</p>
<br>
<p>🔎 대략적인 수치를 알기 위한 것으로, 케이스마다 오차가 있을 수 있습니다.</p>
<ul>
<li>[Local/Docker/Workflow] dependency install 시간</li>
<li>[Docker] 로컬 이미지 build 시간</li>
<li>[Github Actions] CI total workflow 시간</li>
<li>[Github Actions] Build Job, Build &amp; Docker Push Step 시간</li>
</ul>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="과정-1-dependency-install-시간">과정 1) Dependency Install 시간<a class="hash-link" aria-label="과정 1) Dependency Install 시간에 대한 직접 링크" title="과정 1) Dependency Install 시간에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-1-dependency-install-시간">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-pnpm-workflow-local-docker--70">✅ pnpm (workflow, local docker -70%)<a class="hash-link" aria-label="✅ pnpm (workflow, local docker -70%)에 대한 직접 링크" title="✅ pnpm (workflow, local docker -70%)에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm-workflow-local-docker--70">​</a></h3>
<p>PnP로 압축된 종속성 크기 차이의 영향으로, 종속성 크기는 약 26% 작게, install 시간은 약 90% 빠르게 로컬  에서 측정되었지만,<br>
<!-- -->(로컬 yarn berry: 684ms, 로컬 pnpm: 8.1s)</p>
<table><thead><tr><th style="text-align:center">yarn berry (.yarn 크기): <code>187mb(70mb+117mb)</code> (-26%)</th><th style="text-align:center">pnpm (node_modules 크기): <code>255mb</code></th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_10-53dd9c2637de95d9102f381c01d0204a.png" width="481" height="126" class="img_ev3q"></td><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="data:image/png;base64,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" width="455" height="33" class="img_ev3q"></td></tr></tbody></table>
<br>
<p>실제로 <code>workflow</code>에서는 <code>반대로 pnpm이 yarn berry에 비해 약 70% 빠르게 측정</code>되었습니다.</p>
<p><code>zero-install을 사용하지 않는 yarn berry</code>는 PnP방식으로 종속성을 경량화하더라도 <code>docker에서 최초 install하는 과정</code>이 필요하기 때문에 로컬을 제외하면 꽤 <code>많은 시간을 설치에 소비</code>하고 있었습니다.</p>
<p>이와 유사하게 로컬 docker image build 중 yarn의 종속성 설치 시간 또한 <code>workflow 환경과 비슷한 결과</code>를 보여주고 있었습니다. (16.5s)</p>
<table><thead><tr><th style="text-align:center">yarn berry (install 시간): workflow:<code>16.1s</code></th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_7-13e1486f599711f03dde8876a698a411.png" width="843" height="402" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">yarn berry (install 시간): 로컬 docker:<code>16.5s</code></th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_19-140067b807a21a2f139138d250a69860.png" width="1133" height="462" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">pnpm (install 시간): workflow:<code>5.0s</code> (-70%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="/yhwalog/assets/images/lab_1_img_8-d225bb06707de2647ac33894dfb02269.png" width="839" height="689" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">pnpm (install 시간): 로컬 docker:<code>11.7s</code> (-30%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="/yhwalog/assets/images/lab_1_img_20-7e36b794fc4162d5ccecf6d79dd5b3a6.png" width="1198" height="372" class="img_ev3q"></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="과정-2-docker-image-build-시간">과정 2) Docker Image Build 시간<a class="hash-link" aria-label="과정 2) Docker Image Build 시간에 대한 직접 링크" title="과정 2) Docker Image Build 시간에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-2-docker-image-build-시간">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-pnpm--14">✅ pnpm (-14%)<a class="hash-link" aria-label="✅ pnpm (-14%)에 대한 직접 링크" title="✅ pnpm (-14%)에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm--14">​</a></h3>
<p>docker image 크기가 약 35% 작게, image build 시간은 약 14% 빠르게 측정되었습니다.</p>
<table><thead><tr><th style="text-align:center">yarn berry (이미지 사이즈): <code>235mb</code></th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_12-819a0fc8f29b4fbefcd939d9bedec1ea.png" width="2196" height="236" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">pnpm (이미지 사이즈): <code>151.75mb</code> (-35%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="/yhwalog/assets/images/lab_1_img_11-1d53fd39049673d3278d78e2301900a5.png" width="2204" height="218" class="img_ev3q"></td></tr></tbody></table>
<br>
<p>yarn berry는 <code>시작할때 종속성 크기는 작았지만, zero-install 기능을 쓰지 않기에</code>, 오히려 빌드 단계에서 install을 하고 여러가지 파일들 (yarn폴더 내부 release/yarn-4.3.1.cjs, .pnp.cjs, .pnp.loader.mjs 등)을 <code>COPY 명령어로 install   레이어로 가져오는 단계가 많아 시간이 소비</code>되었습니다.</p>
<p>이러한 이유로 종속성 크기가 더 작은 yarn berry가 pnpm보다 workflow 시간이 느리게 측정되었습니다.</p>
<table><thead><tr><th style="text-align:center">yarn berry (build 시간): <code>44.5s</code></th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="data:image/png;base64,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Z82alav5aaedZjVvSyyxhPnrr7/M6NGjzaOPPpoL79Onj9lhhx3MkksuaebMmWOGDRtmEBagH3/80Xz66admzJgxZrfddjNbbbWVFWo32GAD079/f5sXPO+8807z2GOP2TShMBthwR/TOgMHDjQPPvig/XG7adOm5vHHHzd77rmnWXfddc2MGTNsbInLxYcffmjOPfdce1/+brrpJjNx4kSz44472jLhZu/kk0+WYOfxxhtvNO+//77VtPBR8Mgjj1hsiIz2D9xWWmkl888//9gy3XbbbVaTdeaZZ5pLLrnEvPbaa1Z4vfjii83YsWPNDz/8YLWH4AihQYcox3fffWfPXX+77rqrnfI99NBDc8EIbWgj0VgntZ+v7qH65TLynPABc/jhh5vFFlvMPPHEE+bmm2+2MX24CBtfWQh3hdEPmfL21V34xo+NGzc2V111le2LV199dTw4eL3ddtuZvn372v5OX4pSUt91jZUPPvggysJIX5V+XQhmizCOXfjaiHZnZuXll1+2KfgwvfDCC+3HqZSNANc4imWRuwxhlotUxJNQ301qo1AxfO2XNMZ86ciLZyezY2mfIaHyhcJQVjA7oc8X93O+mM8X2sE3VlAe8X6qX7++fT/SHssss4y5/PLLzdSpU4PP6+g4eu+990yzZs3sbNMnn3zifeeE+kSxw9T8oNiIKr+8EXj11VetAMZ0GAPk33//zfGaPXu2ue666+xge+ONN6wZwcorr2zDeRgjDL/yyitWgEIobtSoUS4tGrDLLrvMIDh88803OeHz9NNPtxpV7iNAIpSIHWYoTBgzvYlwiGDIyx9iwCNE3X///eaPP/4we+yxh0Q377zzjn0xI7wjaMapXr16VpOMkHrppZead999Nx6lynWDBg3MZpttZhBW33777UXMIs477zyrCeRB9eSTT5qOHTta2zkEGDBEoIfOPvts+6FAHZ5//nkzZMgQ+xEwc+ZMe851SKCFx1NPPWUfiuQhtOWWW5o333zTXobajwi+uofqJ/n4jquvvroVyqdNm2Yf4NInfLgIH19ZCHeFJdVd+MaPfPiccsop5sorrzQvvvhiJjtrTEN++uknc80115hVV111Edahvps0VmDk6teFYLZI4WIXvjai3Zdddtlc7KWXXtpwD0oaR7lEsZMQZrGoRbkM9d1QG4UyD7VfaIyF0pEfmtMsz5BQGUNh+nxxP0MEs2I+X+DpGyvLLbecYUxdf/319l2EcMp7qWvXrrYoob7EOOLdwHuT8QsfBGIo6TlhI5X4TzW1JQZY2S9EAA1pq1atFt5YcMYAgn7//Xfz5ZdfGhasjBw50nTv3n1BDGNf/EyHkx7BFGrevLn5/vvvrUDLPYQ3CKEQEgH1559/Nmh9EWr4rbXWWlbwxARg1KhR5rnnnrM/7GB32WUXM3nyZCsMusKIA2G/iAYSQVzy5X67du1sXuSH8BhfUIbgiQaZB4GLPv74Yyv4EiZaKle86D3KO378eFuWa6+91po91K1b1wpghFFWyjN37lz70EIQQuuFJglNLNrvE088MceScv/2228Wg6gGL9R+t9xyi6HsCPFoi9HAQYIXgpuv/SRjX91d9UNg8PUlygJNnz7dat7RvjMdjQYcjT0vDh8uNuG8P19ZCHeFheouPOPHe++910yaNMn2c7Dl48Q89Ww8WpXrFVdc0b5Ehg8fbngZ0Y+POuooG2/ttdcO9l0+/lxjRTJx9euWLVsWjJnwjx9dbfTwww/Ho1W5ThpH8QQhzOJxo9ehPs+HYVIfdPVdZoV8zx5mdUI8Q+0XGmOhdNTXVc6kZ0gUp+h5CDPGpu/5EuXhOg+NsVDdhZdr3BLmqnulPF+SsKZ+vrHy66+/WlM8nh18bGBXzViHfHgShgB7/vnnW6UL/RjNO5T2OWEjl/BPhdoSgqusF0WA6VaXnSmDS4ip3AMPPNAOtqhQywucFzamBAi/kHwdipAiPOJHNJAiIGJigNG8XPNiEkLoQxCWlcCuMImLFunvv/+2pgZyj+NGG21ky3fkkUfaqXfiIcyhVUtDUq40cSUOX+MQ2EB8hYtAz5c0PwhhBmFVCIHziCOOsNNN8qEgYa5jUvuB80knnWQQIBBueYkIhdpP4vjq7qtfUl+KTstT7+himBAulMdXFl9YqO5Sv/gRkw602R999JF54IEHrDY5Hsd1LZ4zEGihqEY/qe8mjRVXv+YjECoEM8vA8edqozRCrYNV8FYIs1DCUJ9nvCX1QVffZSYHcj1fMJ0K8Qy1X2iMhdJRFlc50zxDSBunEGbxuFmuQ2MsVHfJwzemfXUPtQM8XX1X8ipkrLjK6at7IVjzvhP6888/rdJD1rD48OR5BckzR55B3Ev7nCBuKUmF2lKiq7wXQYCXle+Fdccdd9i4TOXyixIrmtHKMtXPIMJOiClzeTkwIAlPQ2htGXzjxo2z0bF5FWEQuyLCRQB1hUkeCCJM3fDFethhh1lbS2yL+HJFgIquvMeOF61cGooK+GniE4dFaXEScwFstPhSdxFTkmhweVCBH3USgqfgK/dC7UccHsZoofAwgXCFCQWU1H420rw/X91d9UsqCzyj3gD4AEKDnwYX0vrK4gvz1Z34PqKfY9cMMW3Hi2K+ftuXYv59aU9wZcGjvEwITeq7SWPF1a+LgZmvRq42Ii424Nj7QdH62Rsp/ugz0dmQEGYhdkn9zPc8E56uvhtqo6T8fO2XNMZ86ULlTNvuwkOOSXUgnuv5Iul9R98YS6q78PONaVcbpamDq++mxcxXFsrqCvPVPU05pf5pjyE8mVmB8DCCxj363k1bd185UATx3mBmbcqUKb5oiffVpjYRIo1QXRBAA4kWECEySq+//rp98WH4DjElE/3KxuaQQYitLrasTz/9tBWOsdnFVyWa1GOPPdamZToYwdkXZiPN+8NeFk0kU+1oJVn4wZF02Bwdf/zx9sfCK8wpyk08BNEkg5VoajGNQJMM8SWO4ICmlnrwwRAlhACwyipQgB92xWgBKEOUfO0XjVPM8y222MIK1Lhfw8SCKbYkXArJP1R3F19ssYXQkNCn0hCCLPjy8cB46NKlSy5ZUt9NGiuufl1KzFxtRGUYN5iLoDnm4ysrMfPA4kXwgUKYZeVdaPykNgrxT2o/3xhLSufKs5Ttrs8XF+Lhe1mfL2FuyaGuvsS4QnGByQHvkuhsaqH9hfckyqCoQii5lFVjqFBbFRO9U40Q4CuaFxJTRExtYzOKgALJQjI0gsRhoRdT6iy+ES0P8TBnQBOGUMdiMlb5Q9iU8lXKAjReoM8++6z9+kwKs4kX/LG4AgN7Vh7zgsYmOErY3IpQyWI1yoftJF+knMuKfEkjdZLrNMd4GrkmP/LB5pe8+BJGSEAI4gsbN1IQZQfTs+dpv4VYWMaX9wUXXGDTSh0k3HfEHRsU/dJOaj/hJeWWaznG78evJV78iNCOVwc+Zug/YmLhwyWaPpSHL8xV9yjP0Dmr+/kYSEsPPfSQNadgPPDyiVKoXyeNFeET7dfcKxQz4Rs/+tqIj0X6HB4Q+OiEBPc04whbcTxvgI94GQlhFi9Xsa6lzMJPrkNtJHFdR1/7JY0xXzrJQ8oVv07T7pImy1GfLwsXQcdxi7eFhOfzfPGNlah2mnPylHtJfYm1JoxN/GuLKaB8kBejv0g5pN5Zj3XmqdDt3CWrv300t+H8h4ovXO8rAopAzUUgy5atCGZ8fJxwwgnm66+/XgQUhAw0kph4lIsQiHhgu/JE4Kc88Q+RfMsWqntanrIdZFrMebnEcZa80LKzMM5H2KhH7Z598aL3i40ZvENthIcTFoMWk0KYFTOfNLyS2ijEw9V+acaYK10oH8JK0e5JebrCQ2MsTd1dPAu5F+q7xcYsVPdC6uBLmwZPZkOYDURxFKVi1z3Lc3G+yitaGj1XBBQBRSAPBDBhwOwDd2wuQQv73XKT2C+68hXNrSss672kumfllza+C2dJGxJoiZNVoCVNMTGDHxRqo2ILtOQXwozwclJSG4XK4mq/NGPMlS6UD2GlaPekPOPhSWMsTd3jPAu9DvXdYmKWVPdC6+FK78Nz0KBB1hsKXoswFWBjozgVs+5x3knXmYTaJWelW8GdlKmG104Eoob1tROByqq1fB2nLTUPQaaNZVentOlqQrzaXPea0H5ah+qPQG0eY9Wp7ngowpQPkzVM2GQRZnXpQTnzg1CB5OWWdkosxEvDFAFFoDIQ0HFf/nZSzMuPueaoCCgC1RuBLM/Foi0UY7ENDs5xIZSGWKlOfHGKniZNMeLgDkp8Fgq/tm3b2m0u2eoSW5AQsVoeW5MouXhGw2vrORsPyDarUQzAT1YlR+8Xcp4vTxZqsUVkJRCYxRcFVUK5tYyKgCKgCCgCikA5EMhkfhAqED4+2ZmJ3YrSEL7IZKcf2Qc6KR3OoNkrXQh/brjpYeVwWsLxPi6eWAUvxAp4XD7hlgl7q5A9CHsmY0MiDpvh4eIpvEtx3Hnnna3bKLYglZW9kk8oTOJEj/iHjeKPjRAuqYpBuIvClYwQK++vuOIKa4/DPfy5MlUtfmnTloWFHqzoZ1csfOUVwpN+cMi8bXTZpjQtsT2gbNErafAxympQNncQ7wwShnsv2XUMVyjsKAYRl3wZM7509MXdd9/ddOvWLfcxhUuVXr16WY8NuCIDZ6anID4i8LjAKtTRo0dX8TXLmMNpuLgww+0Xi0TBUvz1Wkb6939FQDQT/9dCaOaKgCKgCFQYAkUTaqk37llclM9qSxcfuYcQi2DZvn17ux3nhAkTrEsnCQ8dR4wYYR3kR+OIDSBa43zIxTMfPmnTIMT43F6Ewnz8wQ87GYgdbYpB7B+P4HfOOefk2CHs8TGAeykE2gEDBlg3XCLUEjFNWUSImzp1ql05XQhPBGncebGyFD97aahOnTr240cc55NGhMr+/fub5Zdf3gq47BL10ksv2Y8k0kCsFEXghNjcQARgXzri4Y+UjwMETzS1BxxwALerCKz2ZuyP/CmHEO5a+PCBaBt80cIflz8clRQBRUARUAQUgUpFoKhCrQ+EIUOGGPZ8jgovvrhp7qNRYtXomDFjDLs14WyflzW+//BrKMIJwi+CAAIwJgIDBw607NFUxTWcvnwRdvr27Wu1mdFt8Ygf4klZ2MGIrTkRaFhAg+YMivLEEXezZs2sEMSq8SQ69dRTbV3jmkLShcJCfGfOnOn8KECDjXsmNKMQOKbFrXXr1taZfHT1Mlpg2kOI9oN/ixYtLFbc95VF0qDtRWCmP0GF8kRrikCK42fpN5Zxwh879NDn4oSmH4Edws9rNA4zC9tuu208ib32paOuaNLBCsI1FTuZpSXiR8sQTcd9jPw5sjMa7lmKNUaj+eh5egR03UJ6rDSmIqAIKAJxBIpmUxtnXMprpovRdjENzPQs+yJDDRo0sM7lJW+2SeQehDYPgQpH+Win0hJT8QhOTBFjthClEE/yxck+TswRHNjVSAieCG+UH4GRcrKNZxKxgwc8cSgfp1BYPG78umvXrlZ7iqAYtTdGI0q5zjjjDCvMxoX6OJ/oddOmTZ2+QaNxsGXFhyjCv5CvLBLOBgvspsQ0uovy4UlbIMBnITw5oN2UHx8mSYRmmel+NkFIS3xIgNHgwYOt3bc4oo+m50ODPsEvakpCHLTQEsaRrX/jhIsfNP+usHhcvVYEFAFFQBFQBKorAiUTatFGslMRP160e+21lz0/7rjjCsYC7RMaQHazaNSoUeqtPBEuxZ4xTSFYmINQx6402AuLpjWaNsRz8uTJZvz48WbkyJFWW4sPTzSswhN74CwmD2g12eLVZfsYCouWN36O2QFCEcI35iN9+vTJRUEryhQ5NpwIV2KmkYsQOGEK3uXwXpK0bNnStGrVygrTci9UFolDmnHjxsnlIsd8efLRQj/KQgjWOO2Xn+yoEuKBcErZZfo/FDcaxkwHbd6pUyfbF9kxLUpsKYpWWPbejoahUZYwjrIDTDQO5wjbLoE5Hk+vFQFFQBFQBBSB6opAycwPENyiK7XlWmwICwEEzaxMFbPAhoVashCnEL7xtKK1xEQAYjFQFkKTC4kQCh6i0RNewjuJLwvU0P6SjqlyPhQQQjCBwAGyL0zK4OMvgiqLzhCOEI7R2M2YMcOac7Az1EUXXWS1o2zTx1aTaQjtJ4Kti9CK8rEzffr0nJadeKGyEI7NJ4KhxOOeUL48SQ+OIQFc8oge0fhHbWqjYaFzyt6xY0fTo0ePULRFwmhD2gUPD71797baVzxLCLFQTmx6494mGCdo4KPEosg4MS5pfyVFQBFQBBQBRaBSESiZpnbixInWhhU7VrRaCEScp7XJTAsowghbDUJoGuvXr2/P5Z69SPnHFCymAEJoYSGZms7K07WYC0EOEsGiefPm9jrpD6GV+rF6HhtfyonpAqYYoTDhy5Q3U9jbbLON3KpyFMFINklAO0s6BCrsLrMIYtg8u7SfaL+HDRtmPvvsM3usUogFN+Jl4TZeAF544YUqSQrhCTOE2tA20VUyLPAGWv8OHTpY7X0WVmCCGQxa1VA7ZuFJXLx+YPedxbwkax4aXxFQBBQBRUARKDUCJRNqS1lwbFsRCnv27GntY5mSh9A0YUPItDkarayEfS6LZRCSIAQ5BHI0hNzr0qVLVpZV4pMH0/kIp9jBdu/evUoc1w38qbK/svwQcBA6+VAIhQkvtLtodPkJIawzpY0GkMValAlBXNxwEYZgyhQ7dq8+7xbCL3pk1T2Cd3xBG3ad8MGfMV4x+EFJZencubP1FIApSJzy5Qkf+gofBZMmTYqzzesaW+J11lnHpm3cuHGuflFmeMtA0y4eEQjzpcNvMlrtJk2aWBbYHKNVxawlDSGwC84cuRainHwosMAQswQ8TygpAoqAIqAIKAKVikDJzA+igLAgCn+ixSIEOwjBDj+jY8eOtdd4GGAhER4QvvrqK3uP6WqIhWUIGUK4lcJ9FfGFmLplEReCE0Icmk2m29lwgXuiPZT4STwlb4kv16NGjbIaUPyaIjhDaWwyhQ9HlxZYwtOGYQ7BhhP8IMrHVDU2phDaRMLghyAqONvAhD8xZ8CfKoupIIT4evXq2XPsRIXYuAMTjVBZ9tlnH2uuIGnkWAhPeNCXaNcsQm0I3+HDh+fcdLE4kB9+auPEojExbyHMl442oY6CIVraKVOmGDxlIAgnEbbt/ISmTZuW88mLsAw/tOZ8GCgpAoqAIqAIKAKVjEDRtsnFhRUaP3EMnwQKWkARpnBRVExXQmgHo66kksqSJpypftwuFZvQDOO7VAT1YvNPw0/MK0TAjqZBs4dJhyssGs91jjCFTW4WswVXWdq0aWP69etnhUM03VnJxVN44KcWTXcx+5/wLuaRmQI+CPJph3zLIRsAqJupfBHUdIqAIqAIKALlRKBoQm05C13peQ0aNMgKKLNnz7bmAJgRYGeq5EegFB8q/tw0BARUqNV+oAgoAoqAIlBJCJTF/KCSAClHWXFd1a5dOztNPXToUOvHthz5VnIexda8VzIWWnZFQBFQBBQBRUARqIpAJk1t1eR6RxFQBGo6Amp+UNNbWOunCCgCikDNQEA1tTWjHbUWikC1QqD+Gi1N3UaNzaxPppi5s3+sVmXLtzAN1tzM/Dv3DzPnm/l+q/Pl40vnw2zplZqZxZeqb2Z/9VYuacO1tjR1l5+/C97PHzxv/q4hGOcqqCeKgCKgCOSBwP8AgfbjkyE56HQAAAAASUVORK5CYII=" width="693" height="33" class="img_ev3q"></td></tr></tbody></table>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:20-alpine AS base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM base AS deps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN corepack enable &amp;&amp; corepack prepare yarn@4.3.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY package.json yarn.lock .yarnrc.yml ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY .yarn/releases/yarn-4.3.1.cjs ./.yarn/releases/yarn-4.3.1.cjs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN yarn install --immutable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<table><thead><tr><th style="text-align:center">pnpm (build 시간): <code>38.3s</code> (-14%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAo8AAAAeCAYAAABNNfS0AAABUGlDQ1BJQ0MgUHJvZmlsZQAAGJV1kDFLQmEUhh/LMNKhwLYCCYUIizBpqsEMLHAwKygnr1fTQu12vRH9AnNqLUho6Ac0NTg19A+Koq2xNQIJSm7naqUWffDyPry83+FwoAdF0/J2oFA09HhkwbOxmfA4nnEwRD8+fIpa0kKxWFQqfHv3q99js/x20pqFPnf8slP1zj6VC8lywv+33/UG0pmSKv4hGlc13QCbVzh2YGgWi3DrspTwkcXZFp9ZnGrxZbOzFg8L3wgPqjklLXwn7E915NkOLuT31a8drO1dmeL6quWiEaJE8LDCEov/9ILNXphdNA7R2SZLDkN+hSTRyJMRXqaIyhR+4QDToqB13993a2fGBMxXoNfZzpIncPUAw6ftbMwNznOoVTRFV36uaavbS1szgRa7dOh7M83XUXDUoKGb5nvVNBsXMv8Rrvc+AeRYX+OKwfciAAAAYmVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADkoYABwAAABIAAABQoAIABAAAAAEAAAKPoAMABAAAAAEAAAAeAAAAAEFTQ0lJAAAAU2NyZWVuc2hvdMnuIZIAAAI8aVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlVzZXJDb21tZW50PlNjcmVlbnNob3Q8L2V4aWY6VXNlckNvbW1lbnQ+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42NTU8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KfaDqcgAAGTRJREFUeAHtnQncVcP7wOctlBbJLrTIGmULUVlCKGXJFiL7xxKyRfZQluxbIbssJeSXJVTWKJTsFbLvEkqU+r/fyfP+p/POzFnuvW/39s7z+dx7zpnlmZln5pzznGebsrXXXnuhygG+/vrrHGqHqtWNAuXrrboNOYy3BCjw+aw5JdDL0MVAgUCBQIGqp0CzBnUqNbpMpZSQECgQKJCIAtttt53666+/1OTJkxOVjxbaeOONVd26ddVbb70VzQrXS4gCtockXdl///3Vc889p/7444/MPct1vaRteO+991bjx49XP/74Y9qqurxtfbZv3141adJE57/wwgvq+++/d+LOB82cyEsoo2vXrmrChAleWpXQcJZIV/Oxlqr6/hNC2e4jySv2o++jukaxdz70r3pR4P7771cPP/xwxaAPP/xw9cgjj6hevXpVpKU9WW211TQO8PC744471BFHHJEWTaXy3bt3V7ygXcBLg/YuuOACa5F9991X9ejRw5pXLIkHHXSQOuGEE4qlO6n6Ub9+fXX88ceriy66SK211lqp6kYLH3DAASpXqXnceom2mes17W266aaZ0djW5zrrrKPWX3991aVLF7XJJpt4ceeDZt4GSiTzkEMOUS1btqzS3pbyfWsjVD7WUlXffzIO230keaV8tEoey+quqGputYeqsUYztXDBArXwiw/Uv1PGqIV/B9VOKU92KfS9rKxM8eNhMWzYMNWuXTvd7Zo1a+bc/XvvvVd98MEHqmPHjqpTp05qzJgx6quvvsoZrwtB27Zt1cKFC9WGG25oLTJo0CC13HLLWfOKJXGDDTZQK620UrF0J1U/zj77bE3fWbNmqcsvv1z17NkzVf3qXti2PocOHarJYn7gVXc6FeP4S/m+LUZ65tIn232UC75iqVuJeYRxXHa3nkrVbaj7WFb+X7bB1qqscQs1/383BwayWGZuKe7HDz/8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" width="655" height="30" class="img_ev3q"></td></tr></tbody></table>
<div class="language-Dockerfile language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FROM node:20-alpine AS base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM base AS deps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN corepack enable &amp;&amp; corepack prepare pnpm@9.5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY package.json pnpm-lock.yaml ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pnpm install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<br>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="과정-3-github-actions-ci-full-duration-시간">과정 3) Github Actions CI (Full Duration) 시간<a class="hash-link" aria-label="과정 3) Github Actions CI (Full Duration) 시간에 대한 직접 링크" title="과정 3) Github Actions CI (Full Duration) 시간에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-3-github-actions-ci-full-duration-시간">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-pnpm--10">✅ pnpm (-10%)<a class="hash-link" aria-label="✅ pnpm (-10%)에 대한 직접 링크" title="✅ pnpm (-10%)에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm--10">​</a></h3>
<p>docker image build에서 소요되는 시간의 여파로 workflow 시간 또한 pnpm이 yarn berry에 비해 10% 빠르게 측정되었습니다.</p>
<table><thead><tr><th style="text-align:center">yarn berry (full duration): <code>1m 21s</code></th><th style="text-align:center">pnpm (full duration): <code>1m 13s</code> (-10%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_15-a325e41f73c1dad390e9d51f71027f4d.png" width="721" height="98" class="img_ev3q"></td><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="/yhwalog/assets/images/lab_1_img_16-02c8f22c297b9fe3e45e164f24e8c2b5.png" width="746" height="100" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">yarn berry (job): <code>1m 13s</code> / (step): <code>1m 7s</code></th><th style="text-align:center">pnpm (job): <code>1m 4s</code>(-10%) / (step): <code>53s</code> (-20%)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 7" src="/yhwalog/assets/images/lab_1_img_17-32e3d0f0a126aff03de556dea6525380.png" width="749" height="422" class="img_ev3q"></td><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 8" src="/yhwalog/assets/images/lab_1_img_18-c8c627e018606dcb145ea834f58abaa4.png" width="751" height="423" class="img_ev3q"></td></tr></tbody></table>
<br>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="결과">결과<a class="hash-link" aria-label="결과에 대한 직접 링크" title="결과에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#결과">​</a></h2>
<p>아주 기본 템플릿으로 진행한 실험으로 모든 케이스에 유의미하게 작용한다고 할 순 없습니다. 하지만 이를 통해</p>
<ul>
<li>Docker, workflow 환경에서 pnpm이 더 빠르게 install한다. <code>(-70%)</code></li>
<li>Docker의 image build 시간은 pnpm이 더 빠르게 build한다. <code>(-14%)</code></li>
<li>Github Actions의 CI(build &amp; docker push) full duration 시간은 pnpm이 더 빠르다 <code>(-10%)</code></li>
</ul>
<p>라는 일련의 결과를 얻게되었습니다.</p>
<br>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="트러블-슈팅">트러블 슈팅<a class="hash-link" aria-label="트러블 슈팅에 대한 직접 링크" title="트러블 슈팅에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#트러블-슈팅">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-문제-yarn-classic--yarn-berry-v4-줄어들지-않는-yarn-cache-용량">💥 문제: yarn classic → yarn berry v4 줄어들지 않는 .yarn cache 용량<a class="hash-link" aria-label="💥 문제: yarn classic → yarn berry v4 줄어들지 않는 .yarn cache 용량에 대한 직접 링크" title="💥 문제: yarn classic → yarn berry v4 줄어들지 않는 .yarn cache 용량에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-문제-yarn-classic--yarn-berry-v4-줄어들지-않는-yarn-cache-용량">​</a></h3>
<p>최초 프로젝트를 yarn classic으로 만들고 <code>yarn set version stable</code>로 berry v4로 버전을 변경 하였습니다. v4인 상태에서 yarnrc.yml의 nodeLinker 값을 pnp로 변경하였으나, <code>.yarn의 cache 용량이 변경 전과 달라지지 않는 현상</code>이 발견되었습니다.</p>
<table><thead><tr><th style="text-align:center">yarn classic (버전 변경 전)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 1" src="/yhwalog/assets/images/lab_1_img_1-d20013e21e4b02792501ce8bacbbd65c.png" width="756" height="359" class="img_ev3q"></td></tr></tbody></table>
<table><thead><tr><th style="text-align:center">yarn berry (버전 변경 후)</th></tr></thead><tbody><tr><td style="text-align:center"><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 2" src="/yhwalog/assets/images/lab_1_img_2-60e3e9611c216d30c128cc537fc98c2e.png" width="756" height="398" class="img_ev3q"></td></tr></tbody></table>
<br>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-해결-cache-폴더의-용량이-줄어들지-않았던-이유">🔎 해결: cache 폴더의 용량이 줄어들지 않았던 이유<a class="hash-link" aria-label="🔎 해결: cache 폴더의 용량이 줄어들지 않았던 이유에 대한 직접 링크" title="🔎 해결: cache 폴더의 용량이 줄어들지 않았던 이유에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-해결-cache-폴더의-용량이-줄어들지-않았던-이유">​</a></h3>
<p>서칭해본 결과 <a href="https://github.com/yarnpkg/berry/issues/5820" target="_blank" rel="noopener noreferrer">yarn berry 공식 레포에 비슷한 현상의 버그 리포트</a>가 존재했고, <a href="https://yarnpkg.com/advanced/changelog" target="_blank" rel="noopener noreferrer">yarn v4의 changelog</a>에도 해당 현상에 대한 내용이 언급되어있었습니다.</p>
<p><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 3" src="/yhwalog/assets/images/lab_1_img_3-5b47009cb5662223b3c2e8b4b4bfdba9.png" width="925" height="206" class="img_ev3q"><br>
<!-- -->버그 리포트 답변 번역:</p>
<blockquote>
<p>제가 Vite 프로젝트로 테스트해본 결과, <a href="mailto:yarn@4.x" target="_blank" rel="noopener noreferrer">yarn@4.x</a>가 compressionLevel을 3.x의 기본값인 mixed로 명시적으로 설정했기 때문에 캐시 파일이 업데이트되지 않습니다.</p>
</blockquote>
<br>
<p><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 4" src="/yhwalog/assets/images/lab_1_img_4-04a88c76cadacc24eb8d07c8529378fb.png" width="928" height="265" class="img_ev3q">
changelog 번역:</p>
<blockquote>
<p>compressionLevel이 이제 mixed 대신 기본값으로 0이 설정됩니다. 설치 시 속도가 크게 빨라졌으며, 크기 영향도 기본값을 변경할 만큼 합리적이었습니다. Zero-Installs를 사용하는 경우에도 이점이 있습니다. 테스트 결과, 압축을 하지 않는 것이 Git에서 더 쉽게 처리되는 것으로 나타났습니다 (compressionLevel: 0과 compressionLevel: mixed를 사용하는 예시에서 직접 확인할 수 있습니다).<br>
<!-- -->업그레이드가 너무 혼란스럽지 않도록 하기 위해, <code>Yarn은 3.6 버전에서 4.0 버전으로 마이그레이션한 후 처음으로 yarn install을 실행할 때 Zero-Installs가 활성화되어 있는지 확인할 것입니다.</code> 만약 활성화되어 있다면, <code>자동으로 이전 기본값(compressionLevel: mixed)을 .yarnrc.yml 파일에 설정합니다.</code> 그런 다음, 압축 설정을 실제로 변경할 준비가 되었을 때 이 설정을 제거할 수 있습니다.</p>
</blockquote>
<br>
<br>
<p>📌 결론적으로 Yarn은 <code>v3에서 v4로 마이그레이션할때</code>만 cache 압축 설정값을 자동으로 명시하겠다는 말이지,<br>
<!-- -->제 케이스처럼 <code>v1에서 v4로 마이그레이션했을 경우</code>는 이처럼 <code>수동으로 compressionLevel을 설정</code>해줘야 정상적으로 cache 용량이 압축됩니다.</p>
<p><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 5" src="/yhwalog/assets/images/lab_1_img_5-ae83a1a45639e3205994f3c4e19f8002.png" width="756" height="340" class="img_ev3q"></p>
<p>회사에서 v3으로 마이그레이션 작업 했을 때의 기억으로는, v4와 다르게 v3은 개발자가 yarnrc.yml 파일에 명시하지 않아도 기본적으로 compressionLevel: mixed으로 설정되어있기때문에 자동으로 압축이 되었습니다.</p>
<p>👉 이처럼 버전에 따라, <code>같은 설정이라도 명시하는 방법이 계속 달라지는 것</code>이 yarn berry를 사용하면서 큰 단점으로 느껴졌습니다.</p>
<p><img decoding="async" loading="lazy" alt="yarn berry 스크린샷 6" src="/yhwalog/assets/images/lab_1_img_6-c94d8b3da7ad23a0ae484608bbd1fec5.png" width="756" height="340" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="나의-결론">나의 결론<a class="hash-link" aria-label="나의 결론에 대한 직접 링크" title="나의 결론에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#나의-결론">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zero-install을-결국엔-쓸-것이라면-안정화-대기-정거장으로-활용하자-아니라면-pnpm">Zero-Install을 결국엔 쓸 것이라면 안정화 대기 정거장으로 활용하자, 아니라면 PNPM<a class="hash-link" aria-label="Zero-Install을 결국엔 쓸 것이라면 안정화 대기 정거장으로 활용하자, 아니라면 PNPM에 대한 직접 링크" title="Zero-Install을 결국엔 쓸 것이라면 안정화 대기 정거장으로 활용하자, 아니라면 PNPM에 대한 직접 링크" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#zero-install을-결국엔-쓸-것이라면-안정화-대기-정거장으로-활용하자-아니라면-pnpm">​</a></h3>
<p>실제로 케이스별 재현을 해보고 수치를 기록하면서 꼭 zero-install이 우리의 유일한 답이 아닐 수도 있었겟 구나 라는 아쉬움이 남았습니다.<br>
<!-- -->깔고 지우는 루틴을 버릴 수 없다면, docker build와 workflow 속도가 빠른 pnpm이 적어도 배포속도와 개발 환경을 보다 안정적으로 유지할 수 있지 않았을까?</p>
<p>이처럼 pnpm은 설치 속도가 빠르고 종속성 관리가 용이하며, yarn berry는 새로운 기능이 많지만 불안정하고 설정이 복잡합니다. 저와 같은 주니어 팀원들이 많은 그룹에서는 오히려 pnpm이 더 유리하지 않을까 생각합니다.</p>
<p>회사에서 yarn을 사용했던 이유는 <code>npm보다 yarn이 빠르다</code>라는 트렌드를 믿었기때문입니다. 많은 사람들이 선택하는 이유는 항상 존재하고 그것도 맞는 답이 될 수 있습니다.</p>
<p>하지만 이제 예전보다 선택권이 많아지고 있습니다.<br>
<!-- -->트렌드도 좋지만 상황에 가장 잘 알맞는 케이스를 찾아내는 것도 개발자 본인의 실력이 되는 것 같습니다.</p>
<br>
<p><a href="https://github.com/stars/yhwabillie/lists/tests" target="_blank" rel="noopener noreferrer">💡 테스트에 사용한 레포는 Github에 게시하였습니다.</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="문서 페이지"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#intro">Intro</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#안정적이지-않은-상태의-기능이라면-당장-사용해야하는-이유가-있을까">안정적이지 않은 상태의 기능이라면 당장 사용해야하는 이유가 있을까?</a></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#그래서-zero-install을-사용하지-않는다면-yarn-berry-with-pnp-or-pnpm">그래서 zero-install을 사용하지 않는다면 yarn berry (with pnp) OR pnpm?</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#개발-환경-조건">개발 환경 조건</a></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#비교-조건">비교 조건</a></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-1-dependency-install-시간">과정 1) Dependency Install 시간</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm-workflow-local-docker--70">✅ pnpm (workflow, local docker -70%)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-2-docker-image-build-시간">과정 2) Docker Image Build 시간</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm--14">✅ pnpm (-14%)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#과정-3-github-actions-ci-full-duration-시간">과정 3) Github Actions CI (Full Duration) 시간</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-pnpm--10">✅ pnpm (-10%)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#결과">결과</a></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#트러블-슈팅">트러블 슈팅</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-문제-yarn-classic--yarn-berry-v4-줄어들지-않는-yarn-cache-용량">💥 문제: yarn classic → yarn berry v4 줄어들지 않는 .yarn cache 용량</a></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#-해결-cache-폴더의-용량이-줄어들지-않았던-이유">🔎 해결: cache 폴더의 용량이 줄어들지 않았던 이유</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#나의-결론">나의 결론</a><ul><li><a class="table-of-contents__link toc-highlight" href="/yhwalog/docs/lab/without-zero-install-yarn-berry-or-pnpm#zero-install을-결국엔-쓸-것이라면-안정화-대기-정거장으로-활용하자-아니라면-pnpm">Zero-Install을 결국엔 쓸 것이라면 안정화 대기 정거장으로 활용하자, 아니라면 PNPM</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 yhwalog, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
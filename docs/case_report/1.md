<!-- ---
title: Yarn classic에서 berry v4로 마이그레이션하기
sidebar_position: 1
---

Yarn classic 버전에서 Yarn berry v4로 마이그레이션 하는 과정과 에러 대처를 기록합니다. 회사에서 대처했던 프로젝트 케이스를 재현하여 기본 프로젝트를 만든 후 마이그레이션을 진행합니다. (실무에서는 v3으로 했지만 문서는 개인적인 기록을 위해 v4으로 대체합니다.)

## 준비물
Nextjs(appRouter) + Prisma(ORM) + PostgreSQL(DB) 으로 구성된 간단한 REST API를 가진 프로젝트 repo

## 준비물 Setup
`yarn add -D prisma`

`npx prisma init`

`yarn add dotenv`

한 컬럼에 데이터를 여러개 넣어야 하는 상황 배열 형태의 String값

DB에 저장할 때는 배열의 형태를 띈 문자열을 저장한다.
test_result = (ex. '["a:1", "b:1"]')

'[{T_01:1},{T_02:3},{T_03:2}]'

DB에서 꺼내서 값을 추가하거나 삭제할 때는
JSON.parse를 사용해서 배열 자료형으로 변환한 후,
push나 pop등의 배열 메소드를 통해 데이터를 추가하거나 삭제해준다.

두 번째는 그냥 배열 형태의 데이터를 통째로 String으로 변환 후 DB에 저장하고 꺼내올 때는 String을 파싱하여 List에 담아서 보내는 것이다.
배열을 그대로 하나의 레코드에 저장할 수는 없다. 왜냐하면 이는 제1정규형에 위반되므로 기본적으로 RDBMS에서 제한한다. -->